## 웹 캐시

캐시는 자주 쓰이는 문서 사본을 저장한 HTTP 장치다.     
여기에는 캐시의 특징과 캐시를 사용했을때의 이점에 대해 서술하도록 하겠다.
- 캐시의 특징
- 캐시 저장위치
- 캐시 적중, 비적중, 재검사
---
#### 캐시의 특징
- 네트워크 병목을 줄여준다.   
많은 네트워크가 원격서버보다 로컬네트워크에 더 넓은 대역폭을 제공한다. 로컬네트워크에 저장된 캐시 사본을 가져옴으로써, 성능을 대폭 향상시킬수있다.

- 불필요한 데이터 전송을 줄인다.   
클라이언트들이 서버에 같은 문서를 요청할때마다, 서버는 중복된 문서를 클라이언트에게 제공한다. 첫번째 응답을 캐시에 보관하여, 불필요한 데이터 전송을 줄이고 원 서버의 부하를 줄일수있다.

- 거리로 인한 지연을 줄여준다.     
클라이언트와 서버의 물리적거리가 멀 경우, 빛의 속도 그 자체가 유의미한 지연을 유발한다. 캐시를 이용해 더 가까운 위치에서 문서를 제공한다면, 성능을 크게 향상시킬수있다.

---
#### 캐시 저장위치
캐시는 개인 전용 캐시와 다른사람과 함께 사용하는 공용 캐시가 있다.    

- 개인 전용 캐시     
개인전용캐시는 사용자의 웹 브라우저에 의해서 관리되며, 웹 브라우저에 저장된다. 

- 공용 캐시(캐시 프락시 서버)     
공용 캐시(혹은 캐시 프락시 서버라고 불린다.) 공용캐시는 클라이언트와 서버 사이에 위치하여 클라이언트의 요청에 대응되는 캐시 문서가 있는지 우선 확인한다.
공용캐시는 여러사용자가 접근하기때문에, 불필요한 트래픽을 줄일수있는 더 많은 기회가 있다.

--- 
#### 캐시 적중, 재검사, 부적중
캐시는 많은 이점이 있지만, 캐시된 문서가 클라이언트에게 제공하기에 충분히 신선한가 판단하는기준은 모호하다.   
캐시(서버)는 원서버에 캐시된 문서가 충분히 신선한지 확인하기위해서, If-Modified-Since 요청을 함께보낸다. 서버에 있는 문서가 이 시간 이후로 수정되었다면, 클라이언트는 원서버 응답을 받을것이다.        

서버는 사용자에게 신선한 문서를 제공해주기 위해서, 재검사와 부적중 과정을 거친다.    
     
- 캐시 적중
캐시 적중은 요청 문서가 캐시에 있고, 이 캐시가 충분히 신선하여 다시 클라이언트에 전달되는 경우다.

- 캐시 재검사
캐시는 있지만, 해당 캐시가 충분히 신선한지 확인하지 못할때 일어난다. 캐시서버는 원서버에 작은 재검사 요청을 보내고, 만약, 원서버에서 해당 캐시에 대해 변경이 없다면, 캐시 만료기한을 증가 시킨다. 이를 재검사 적중이라고 하며, 재검사 부적중시, 원서버는 캐시서버의 캐시를 업데이트하며, 클라이언트는 원서버의 문서를 받게된다.     


캐시를 재검사하거나, 새로운 캐시를 만들때, HTTP프로퍼티를 통해 해당캐시의 유효기간을 설정해줄수있다.
(유효기간이 만료되어도 사라지는것이 아닌, 서버와 재검사를 해야한다는 의미임을 주의하자)
```HTTP
Cache-Control: max-age=12345(초 단위이다)
```

- 캐시 부적중
캐시에 대응되는 캐시문서가 없다면, 원 서버로 요청을 전달한다.
