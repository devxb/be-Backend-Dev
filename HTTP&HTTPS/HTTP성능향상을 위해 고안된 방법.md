## -   HTTP성능 향상을 위해 고안된 방법 - 병렬 커넥션, keep-alive 커넥션, keep-alive 파이프라인

목차
- TCP를 이용해 통신하는 HTTP프로토콜
- 병렬 커넥션
- keep-alive 커넥션
- keep-alive 파이프라인

---

HTTP는 TCP프로토콜 위에 있는 계층으로, TCP프로토콜의 성능에 영향을 받는다.

HTTP프로토콜의 성능향상을 위해 고안된 방법을 이해하기위해서 클라이언트와 서버가 HTTP가 TCP프로토콜을 통해 트랜잭션을 하는 과정을 2단계로 끊어서 간단히 알아보자.

1. 클라이언트는 타겟 서버 IP주소와 TCP 커넥션을 맺는다. 이때, 자신의 정보와, 서버의 정보를 교환하며 커넥션된다. (이와 같은 과정을 서버와 클라이언트가 번갈아가며 교환한다는 의미로 핸드셰이킹이라함.)

2. 클라이언트와 서버는 연결된 TCP통로에서 HTTP프로토콜을 통해 자료를 교환하고, 커넥션을 끊는다.

이 트랜잭션에서 (대용량 파일을 주고받는게 아니라면) 2번과정에 비해 비교적 많은 시간이 1번 과정에서 소요된다. 
하나의 HTML문서를 내려받는경우라면 크게 문제되지않지만, 현대의 웹 페이지에는 수많은 미디어가 있고, 서버와 여러번 통신을 한다. 따라서, 위와같은 트랜잭션을 고수할경우, 자료교환마다 매번 TCP 커넥션을 새로 맺어줘야하며, 이는 성능저하로 이어진다.

---
병렬 커넥션   

위와 같은 문제를 해결하기위해 고안된것이 병렬 커넥션이다.
병렬커넥션은 서버와 클라이언트 사이에 여러개의 TCP 커넥션을 맺고, 자료교환을 동시에 하는 방법이다.
병렬커넥션은 실제로 빠르지만, 아래와 같은 문제점이 있었다.

- 클라이언트와 서버사이의 네트워크 폭이 좁을경우 수행시간은 병렬 커넥션을 사용하지않은것과 별 차이가 없다.

keep-alive 커넥션 (HTTP/1.1 지속 커넥션)

keep-alive 커넥션은 HTTP트랜잭션에서 TCP연결 과정(1번과정)을 최적화한 기법이다. 
서버와 클라이언트는 HTTP 트랜잭션을 수행후, TCP 커넥션을 끊지않는다. (무한히 열려있지는 않고, 서버의 구현에따라 언제든 끊길수있다.)   
이 방법으로 서버와 클라이언트는 TCP커넥션을 맺는과정에서 걸리는 시간을 최소화 할수있다.   
또한 이 방식에는 'TCP 커넥션을 재사용 함으로써 튜닝된 TCP 커넥션을 이용한다'는 장점이 있다. TCP커넥션은 네트워크의 부하를 줄이기 위해 'TCP의 느린시작'이라는 방법을 사용하는데, TCP 느린시작이란 방금 막 커넥션된 TCP 연결은 데이터의 전송 속도를 제한하고 이 후, 트랜잭션이 성공적으로 완료될때마다, 점차 속도를 올리는 방식이다. 따라서, TCP커넥션을 재 사용할경우, 커넥션을 속도가 향상된 상태로 사용할수있다.  
HTTP1.0+에서는 keep-alive 커넥션이 선택이였으나, HTTP1.1부터 keep-alive커넥션의 문제점이 해결된 지속 커넥션이 도입되었다.
keep-alive 파이프라인

keep-alive 파이프라인이란, 연결되어있는 TCP 커넥션을 통해서, 웹 서버의 응답을 기다리지않고, 요청을 연속적으로 보내는 방법이다.
하지만, 파이프라인은 기본적으로 활성화 되어있지않으며, 성능향상은 미미한 수준이라고 하는데, 그 이유로,
1. 버그가 있는 프록시들이 많다.
2. 동시에 여러 요청을 보내며, 중요한 정보의 우선순위가 상대적으로 덜 중요한 요청에 밀릴수있다. 
